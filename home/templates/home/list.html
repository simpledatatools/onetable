<header class="page-header page-header-light bg-white pb-10">
  <div class="container">
      <div class="page-header-content pt-4">
          <div class="row align-items-center justify-content-between">
              <div class="col-auto mt-4">
                  <h1 class="page-header-title">
                    Records for {{ list.name }}
                  </h1>
              </div>
              <div class="col-12 col-xl-auto mb-3">
                <div class="page-header-subtitle"><a href="{% url 'add_record' organization_pk=organization.pk app_pk=app.pk list_pk=list.pk %}">Add new record</a></div>
              </div>
          </div>

      </div>
  </div>
</header>
<!-- Main page content-->
<div class="container bg-white mt-n10">
  <!-- search box -->
  <div class="card mb-3">
    <div class="card-body">
      <div class="sbp-preview-content">
      <form id="search" action="" method="POST">
          <input type="hidden">
            <div class="form-group mb-0 d-flex">
             <div class="input-group">
               <input type="text" class="form-control" id="search_value" placeholder="Search...">
               <button id='erase_search_button' type="button" class="btn bg-transparent" style="margin-left: -40px; z-index: 100;">
               <i class="fa fa-times"></i>
               </button>
              </div>
            </div>
        </form>
      </div>
    </div>
  </div>
<!-- Main page content-->
  <div id="records-list">
    {% include "home/records-list.html" %}
  </div>

</div>
<script>

  $(document).ready(function(){

    $('#search').submit(function(ev){
      ev.preventDefault();
      var next_url =  window.location.pathname + '?search='+$('#search_value').val();
      getPage(next_url);
    });

    var url_string = window.location.href;
    var url = new URL(url_string);
    var search_value = url.searchParams.get("search");
    $('#search_value').val(search_value);
    if(search_value != null){
      $('#search_value').focus();
    }

    $('#erase_search_button').click(function(ev){
      ev.preventDefault();
      var next_url =  window.location.pathname ;
      getPage(next_url);
    });
  });
</script>
